(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),i=a.n(l),o=(a(78),a(12)),s=a(13),c=a(14),u=a(15),m=a(8),p=a.n(m),d=a(28),h=a(30),f=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"nextButtonClicked",value:function(){console.log("NextButtonClicked")}},{key:"render",value:function(){return r.a.createElement("div",null,"home")}}]),a}(n.Component);f.defaultProps={printStatus:""};n.Component,n.Component;var v=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={material:"",intervalID:null,startTime:0,state:"ready",timeSec:0,timeMin:0,progress:0},e.tick=function(){var t=(new Date).getTime()-e.state.startTime,a=new Date(t);e.setState({timeSec:a.getSeconds(),timeMin:a.getMinutes()})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ws=new WebSocket("ws://"+window.location.hostname+":8000/ws/progress"),this.ws.onopen=function(){console.log("connected")},this.ws.onmessage=function(t){var a=JSON.parse(t.data);if("start"===a.method)e.setState({state:"print",timeSec:0,timeMin:0});else if("setTimerOnoff"===a.method)if(!1===a.onOff)setInterval(e.tick,100);else!0===a.onOff&&clearInterval(e.state.intervalID);else"setTimerTime"===a.method?e.setState({startTime:a.startTime}):"pause"===a.method?e.setState({state:"pause"}):"finish"===a.method?e.setState({state:"ready"}):"resume"===a.method?e.setState({state:"print"}):"update"===a.method&&e.setState({progress:a.progress})},this.ws.onclose=function(){console.log("disconnected")},p.a.get("/api/state").then((function(t){e.setState({satet:t.data.state})})),console.log((new Date).getTime())}},{key:"componentWillUnmount",value:function(){this.ws.close()}},{key:"render",value:function(){return r.a.createElement("div",null,"\ubaa8\ub378\uba85 : C-10",r.a.createElement("br",null),"\ud38c\uc6e8\uc5b4 \ubc84\uc804 : 1.0.0",r.a.createElement("br",null),"\uc81c\uc870\uc0ac : HiX",r.a.createElement("br",null),"\uc2dc\ub9ac\uc5bc \ub118\ubc84 : C103d20200611-A01",r.a.createElement("br",null))}}]),a}(n.Component),g=a(5),b=a(161),E=a(147),w=a(159),k=a(162),y=a(148),S=a(45);p.a.defaults.xsrfCookieName="csrftoken",p.a.defaults.xsrfHeaderName="X-CSRFToken";var C=function(){var e=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].replace(" ","");if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");return r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:e})},O=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedFile:null},e.handleFilePost=function(){var t=new FormData;null!==e.state.selectedFile?(t.append("file",e.state.selectedFile),p.a.post("/api/file/upload/",t).then((function(t){e.props.onFileUploaded(e.state.selectedFile)})).catch((function(e){alert("file upload fail")}))):alert("file select required")},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){p.a.get("/api/get_csrf/")}},{key:"handleFileInput",value:function(e){console.log(e.target.value),this.setState({selectedFile:e.target.files[0]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("input",{type:"file",name:"file",accept:".zip",onChange:function(t){return e.handleFileInput(t)}}),r.a.createElement("button",{type:"button",onClick:this.handleFilePost},"file select"))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={material:"Choose here",materialList:["-------------------------"]},e.materialChange=function(t){e.setState({material:t.target.value})},e.handleMaterialPost=function(){var t="/api/material/"+e.state.material+"/select/";"Choose here"!==e.state.material?p.a.post(t).then((function(t){e.props.onMaterialSelected(e.state.material)})).catch((function(e){alert("material select fail")})):alert("material select required")},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){p.a.get("/api/get_csrf/"),null!==this.props.material&&this.setState({material:this.props.material})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("select",{value:this.state.material,onChange:this.materialChange},r.a.createElement("option",{disabled:!0},"Choose here"),this.props.materialList.map((function(e,t){return r.a.createElement("option",{key:t},e)}))),r.a.createElement("button",{type:"button",onClick:this.handleMaterialPost},"material select"))}}]),a}(n.Component),M=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedFile:{name:""},selectedMaterial:null,selected:[!0,!0],materialList:["--------------------"],activeStep:0,steps:["Select Print File","Choose Material","Print"],socketName:""},e.handleNext=function(){e.setState({activeStep:e.state.activeStep+1})},e.handlePrint=function(){p.a.post("/api/start/").then((function(t){e.props.history.push("/progress/"),alert("sucess")})).catch((function(e){alert("print fail")}))},e.handleReset=function(){e.setState({activeStep:0})},e.handleFileUpload=function(t){e.setState({selectedFile:t,selected:[!1,!0]}),p.a.get("/api/material/").then((function(t){var a=[];t.data.forEach((function(e,t,n){a.push(e.M_id)})),a.includes("custom_resin")?e.setState({isCustomResin:!0}):e.setState({isCustomResin:!1}),e.setState({materialList:a})}))},e.handleMaterialSelected=function(t){e.setState({selectedMaterial:t,selected:[!0,!1]})},e}return Object(s.a)(a,[{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(O,{onFileUploaded:this.handleFileUpload});case 1:return r.a.createElement(j,{materialList:this.state.materialList,material:this.state.selectedMaterial,onMaterialSelected:this.handleMaterialSelected});case 2:return r.a.createElement(S.a,null,"file name :  ",this.state.selectedFile.name," ",r.a.createElement("br",null),"material :  ",this.state.selectedMaterial);default:return"no more step"}}},{key:"componentDidMount",value:function(){var e=this;this.ws=new WebSocket("ws://"+window.location.hostname+":8000/ws/setting"),this.ws.onopen=function(){console.log("connected")},this.ws.onclose=function(t){4100===t.code&&(e.props.history.push("/"),alert("timeout"))},this.ws.onerror=function(){e.props.history.push("/"),alert("can not access this page")},this.ws.onmessage=function(t){var a=JSON.parse(t.data);e.setState({socketName:a.name})}}},{key:"componentWillUnmount",value:function(){this.ws.close()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{activeStep:this.state.activeStep,orientation:"vertical"},this.state.steps.map((function(a,n){return r.a.createElement(E.a,{key:a},r.a.createElement(w.a,null,a),r.a.createElement(k.a,null,e.getStepContent(n),r.a.createElement("div",{className:t.actionsContainer},e.state.activeStep!==e.state.steps.length-1&&r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:e.handleNext,disabled:e.state.selected[n],className:t.button},"Next "),e.state.activeStep===e.state.steps.length-1&&r.a.createElement(y.a,{onClick:e.handleReset,className:t.button}," Reset"),e.state.activeStep===e.state.steps.length-1&&r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:e.handlePrint,className:t.button}," Print"))))}))))}}]),a}(n.Component),N=(Object(g.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}))(M),a(69)),F=a(44),x=a(155),P=a(154),D=a(150),T=a(158),B=a(160),R=a(157),I=a(151),U=a(163),L=a(152),W=a(153),A=a(67),J=a.n(A),_=a(68),q=a.n(_),H=a(156),X=a(149),z=a(16),G=Object(X.a)((function(e){return{root:{display:"flex"},drawer:Object(F.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(F.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(F.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}}));var $=function(e){var t=e.window,a=G(),n=Object(z.a)(),l=r.a.useState(!1),i=Object(N.a)(l,2),o=i[0],s=i[1],c=function(){s(!o)},u=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar},r.a.createElement(S.a,{paragraph:!0})),r.a.createElement(D.a,null),r.a.createElement(I.a,null,r.a.createElement(U.a,{button:!0,component:d.b,to:"/"},r.a.createElement(L.a,null," ",r.a.createElement(J.a,null)," "),r.a.createElement(W.a,{primary:"home"})))),m=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:a.root},r.a.createElement(P.a,null),r.a.createElement(x.a,{position:"fixed",className:a.appBar},r.a.createElement(H.a,null,r.a.createElement(R.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:c,className:a.menuButton},r.a.createElement(q.a,null)),r.a.createElement(S.a,{variant:"h6",noWrap:!0},"C-10"))),r.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},r.a.createElement(B.a,{smUp:!0,implementation:"css"},r.a.createElement(T.a,{container:m,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:o,onClose:c,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},u)),r.a.createElement(B.a,{xsDown:!0,implementation:"css"},r.a.createElement(T.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},u))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),e.children))},K=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={posts:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/state").then((function(t){if("ready"!==t.data.state)return e.props.history.push("/Status")}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement($,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:v})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(102)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.d5d188a6.chunk.js.map